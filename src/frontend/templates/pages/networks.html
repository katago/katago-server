{% extends 'base.html' %}

{% load i18n %}
{% load custom_time_formatting %}
{% load custom_url_tags %}

{% block title %}
{% if not run %}
{% trans "KataGo - Networks for Current Run" %}
{% else %}
{% blocktrans with run_name=run.name %} KataGo - Networks for {{run_name}} {% endblocktrans %}
{% endif %}
{% endblock %}

{% block content %}

{% if not run %}
{% trans "No currently active run to view networks for." %}
{% elif viewing_current_run %}
<h1 class="title">{% blocktrans with run_name=run.name %}Networks for Current Run ({{run_name}}){% endblocktrans %}</h1>
{% else %}
<h1 class="title">{% blocktrans with run_name=run.name %}Networks for {{run_name}}{% endblocktrans %}</h1>
{% endif %}

{% if run and network_list|length <= 0 %}
{% trans "No networks found for this run!" %}
{% elif run and network_list|length > 0 %}

{% blocktrans with katago_releases_url="https://github.com/lightvector/KataGo/releases" %}
Stats and download links for all the neural networks from the current run. Downloaded nets can be used directly with <a href="{{katago_releases_url}}">KataGo</a>.
{% endblocktrans %}

<table class="table">
  <tr>
    <th> {% trans "Name" %} </th>
    <th> {% trans "Uploaded At" %} </th>
    <th> {% trans "Approx Elo Rating" %} </th>
    <th> {% trans "Download" %} </th>
    <th> {% trans "Raw TF Weights" %} </th>
  </tr>
  {% for network in network_list %}
  <tr>
    <td>
      {{ network.name }}
      {% if network.notes %}
      <i class="fas fa-info-circle" title="{{network.notes}}"></i>
      {% endif %}
    </td>
    <td> {{ network.created_at|isotimestr }} </td>
    <td> {{ network.rating }} </td>
    <td> {{ network.model_file|file_download_link_html|safe }} </td>
    <td> {{ network.model_zip_file|file_download_link_html|safe }} </td>
  </tr>
  {% endfor %}
</table>
{% endif %}

{% if other_runs_to_show|length > 0 %}
<h1 class="title"> {% trans "Networks for Other Runs" %} </h1>
<table class="table">
  <tr>
    <th> {% trans "Run Name" %} </th>
  </tr>

  {% for run in other_runs_to_show %}
  <tr>
    <td><a href="{% url 'networks' run.name %}"> {{ run.name }}</a></td>
  </tr>
  {% endfor %}
</table>
{% endif %}

{% endblock content %}
